# Story 2.2: Save Confirmation Screen

## Status

Approved

## Story

**As a** user,  
**I want** to see a confirmation of my saved spot,  
**so that** I know the save was successful and can add optional details.

## Acceptance Criteria

1. Confirmation screen displays after successful location capture
2. Shows the saved coordinates (lat/lng)
3. Shows timestamp of when spot was saved
4. Provides options to: Add photo, Add note, Set car tag, Set timer (timer in Epic 4)
5. "Done" button returns to home screen
6. "Navigate Now" button opens maps app with directions (to be functional in Epic 3)
7. Screen is skippable - user can tap "Done" immediately for fastest flow

## Tasks / Subtasks

- [ ] **Task 1: Create Confirmation Page** (AC: 1, 2, 3)
  - [ ] Create `apps/web/src/pages/SpotConfirmationPage.tsx`
  - [ ] Receive spot data via route params or store
  - [ ] Display latitude and longitude (formatted)
  - [ ] Display timestamp in user's locale format
  - [ ] Show success indicator (checkmark animation)

- [ ] **Task 2: Create Spot Detail Card Component** (AC: 2, 3)
  - [ ] Create `apps/web/src/components/spot/SpotDetailCard.tsx`
  - [ ] Create `apps/web/src/components/spot/types.ts`
  - [ ] Show map preview (static image or mini map)
  - [ ] Display coordinates in human-readable format
  - [ ] Display address when available (async from Story 2.8)
  - [ ] Display "Saved at [time]" with relative time

- [ ] **Task 3: Create Action Buttons Section** (AC: 4)
  - [ ] Create `apps/web/src/components/spot/SpotActions.tsx`
  - [ ] Add "Add Photo" button (links to Story 2.3)
  - [ ] Add "Add Note" button (links to Story 2.5)
  - [ ] Add "Set Car Tag" selector (links to Story 2.7)
  - [ ] Add "Set Timer" button (disabled, placeholder for Epic 4)
  - [ ] Style as horizontal scrollable or grid

- [ ] **Task 4: Photo Action Button** (AC: 4)
  - [ ] Create camera icon button
  - [ ] On click: open camera capture (Story 2.3)
  - [ ] Show thumbnail after photo added
  - [ ] Allow removing/replacing photo

- [ ] **Task 5: Note Action Button** (AC: 4)
  - [ ] Create note icon button
  - [ ] On click: expand inline text input (Story 2.5)
  - [ ] Show note preview if already added
  - [ ] Character count indicator

- [ ] **Task 6: Car Tag Selector** (AC: 4)
  - [ ] Create car icon with dropdown
  - [ ] Show available tags (default + custom)
  - [ ] Update spot when tag selected
  - [ ] Display selected tag on button

- [ ] **Task 7: Done Button** (AC: 5, 7)
  - [ ] Create prominent "Done" button
  - [ ] Position at bottom of screen
  - [ ] On click: navigate to home screen
  - [ ] Show success toast on home screen

- [ ] **Task 8: Navigate Now Button** (AC: 6)
  - [ ] Create "Navigate Now" secondary button
  - [ ] On click: placeholder/disabled for now
  - [ ] Add TODO comment for Epic 3 implementation
  - [ ] Show tooltip "Coming soon" or enable with basic functionality

- [ ] **Task 9: Page Layout and Styling**
  - [ ] Mobile-first responsive layout
  - [ ] Success animation on page load
  - [ ] Smooth scroll for action buttons
  - [ ] Accessible focus management

- [ ] **Task 10: Update Spot After Edits** (AC: 4)
  - [ ] Create `useSpotUpdate` hook or use spotStore
  - [ ] Implement partial updates (PATCH endpoint from Story 2.5)
  - [ ] Optimistic UI updates
  - [ ] Handle save errors gracefully

- [ ] **Task 11: Testing**
  - [ ] Test page renders with spot data
  - [ ] Test all action buttons visible
  - [ ] Test Done navigation
  - [ ] Test on mobile viewports
  - [ ] Write Playwright E2E tests

## Dev Notes

### Architecture References

- [architecture-frontend/6-component-hierarchy.md](../architecture-frontend/6-component-hierarchy.md)
- [architecture/7-core-workflows.md](../architecture/7-core-workflows.md) - Save spot flow

### Page Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         âœ“ Spot Saved!          â”‚
â”‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚     [Map Preview]        â”‚  â”‚
â”‚  â”‚                          â”‚  â”‚
â”‚  â”‚  40.7128, -74.0060       â”‚  â”‚
â”‚  â”‚  Near Central Park       â”‚  â”‚
â”‚  â”‚  Saved 2 minutes ago     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ“· â”‚ â”‚ ğŸ“ â”‚ â”‚ ğŸš— â”‚ â”‚ â±ï¸ â”‚  â”‚
â”‚  â”‚Photoâ”‚ â”‚Noteâ”‚ â”‚ Tagâ”‚ â”‚Timerâ”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜  â”‚
â”‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚       Navigate Now       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚          Done            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Component Implementation

```tsx
// pages/SpotConfirmationPage.tsx
import { useParams, useNavigate } from 'react-router-dom';
import { useSpotStore } from '@/stores/spotStore';
import { SpotDetailCard } from '@/components/spot/SpotDetailCard';
import { SpotActions } from '@/components/spot/SpotActions';

export function SpotConfirmationPage() {
  const { spotId } = useParams<{ spotId: string }>();
  const navigate = useNavigate();
  const { currentSpot } = useSpotStore();

  const handleDone = () => {
    navigate('/', { replace: true });
  };

  const handleNavigate = () => {
    // Epic 3: Open maps navigation
    console.log('Navigate - Coming in Epic 3');
  };

  return (
    <div className="min-h-screen p-4 flex flex-col">
      {/* Success Header */}
      <div className="text-center py-6">
        <div className="text-4xl mb-2">âœ“</div>
        <h1 className="text-2xl font-bold">Spot Saved!</h1>
      </div>

      {/* Spot Details */}
      <SpotDetailCard spot={currentSpot} />

      {/* Action Buttons */}
      <SpotActions spot={currentSpot} />

      {/* Navigation Buttons */}
      <div className="mt-auto space-y-3">
        <button
          onClick={handleNavigate}
          className="w-full h-12 border-2 border-blue-500 text-blue-500 rounded-lg font-medium"
        >
          Navigate Now
        </button>
        <button
          onClick={handleDone}
          className="w-full h-12 bg-blue-500 text-white rounded-lg font-medium"
        >
          Done
        </button>
      </div>
    </div>
  );
}
```

### Spot Actions Component

```tsx
// components/spot/SpotActions.tsx
interface SpotActionsProps {
  spot: Spot;
  onPhotoAdd?: () => void;
  onNoteAdd?: () => void;
  onTagChange?: (tag: string) => void;
}

export function SpotActions({ spot, onPhotoAdd, onNoteAdd, onTagChange }: SpotActionsProps) {
  return (
    <div className="flex gap-4 py-4 overflow-x-auto">
      <ActionButton icon="ğŸ“·" label="Photo" onClick={onPhotoAdd} active={!!spot.photoUrl} />
      <ActionButton icon="ğŸ“" label="Note" onClick={onNoteAdd} active={!!spot.note} />
      <ActionButton
        icon="ğŸš—"
        label={spot.carTag || 'Tag'}
        onClick={() => {
          /* Open tag selector */
        }}
      />
      <ActionButton icon="â±ï¸" label="Timer" disabled tooltip="Coming soon" />
    </div>
  );
}
```

### Route Configuration

```tsx
// Add to router
<Route path="/spot/:spotId/confirm" element={<SpotConfirmationPage />} />
```

### Navigation Flow

```
Home â†’ Save â†’ [Geolocation] â†’ [API Save] â†’ Confirmation â†’ Home
                                               â†“
                                        Add Photo/Note/Tag
```

### File Locations

**New Files:**

- `apps/web/src/pages/SpotConfirmationPage.tsx`
- `apps/web/src/components/spot/SpotDetailCard.tsx`
- `apps/web/src/components/spot/SpotActions.tsx`
- `apps/web/src/components/spot/types.ts`

**Modified Files:**

- `apps/web/src/router.tsx` - add confirmation route

### Testing Coverage

- SpotConfirmationPage: 90%
- SpotDetailCard: 95%
- SpotActions: 90%

## Change Log

| Date       | Version | Description            | Author |
| ---------- | ------- | ---------------------- | ------ |
| 2026-01-15 | 1.0     | Initial story creation | PO     |
